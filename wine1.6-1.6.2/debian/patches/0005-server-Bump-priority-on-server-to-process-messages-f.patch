From 6de041c94b141ba6cfe66139e09da3c80cc045a7 Mon Sep 17 00:00:00 2001
From: Maarten Lankhorst <maarten.lankhorst@canonical.com>
Date: Sat, 31 Aug 2013 08:36:00 +0200
Subject: [PATCH 05/41] server: Bump priority on server to process messages
 faster

---
 server/main.c | 4 ++++
 1 file changed, 4 insertions(+)

Index: wine1.6-1.7.1-actually1.6/server/main.c
===================================================================
--- wine1.6-1.7.1-actually1.6.orig/server/main.c	2013-09-13 16:19:05.000000000 -0700
+++ wine1.6-1.7.1-actually1.6/server/main.c	2013-09-13 16:20:04.000000000 -0700
@@ -28,6 +28,7 @@
 #include <stdlib.h>
 #include <sys/time.h>
 #include <unistd.h>
+#include <sys/syscall.h>
 #ifdef HAVE_GETOPT_H
 # include <getopt.h>
 #endif
@@ -38,6 +39,8 @@
 #include "request.h"
 #include "wine/library.h"
 
+extern int rtkit_make_realtime(pid_t process, pid_t thread, int priority);
+
 /* command-line options */
 int debug_level = 0;
 int foreground = 0;
@@ -145,6 +148,7 @@
     init_signals();
     init_directories();
     init_registry();
+    rtkit_make_realtime(getpid(), syscall( SYS_gettid ), 2);
     main_loop();
     return 0;
 }
