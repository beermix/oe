From 7abb247d83c509a81105c32ac5e4cb7fca8c9193 Mon Sep 17 00:00:00 2001
From: MilhouseVH <milhouseVH.github@nmacleod.com>
Date: Wed, 14 Mar 2018 00:23:10 +0000
Subject: [PATCH] samba: update to samba-4.8.0

---
 packages/network/samba/package.mk                  |  4 +--
 ...a-953-backport-misleading-file-exists-fix.patch | 41 ----------------------
 2 files changed, 2 insertions(+), 43 deletions(-)
 delete mode 100644 packages/network/samba/patches/samba-953-backport-misleading-file-exists-fix.patch

diff --git a/packages/network/samba/package.mk b/packages/network/samba/package.mk
index 8ea77140817..01fdea9e659 100644
--- a/packages/network/samba/package.mk
+++ b/packages/network/samba/package.mk
@@ -17,8 +17,8 @@
 ################################################################################
 
 PKG_NAME="samba"
-PKG_VERSION="4.7.6"
-PKG_SHA256="1eede30fc8ef6504e24602fb72b00baa0a7b73b59f16d25cb0771dc8c7c57d6e"
+PKG_VERSION="4.8.0"
+PKG_SHA256="87d9b585dbd8628e79aabb6e621a94bd20a072a00762e78e0899fad22fc18fb7"
 PKG_ARCH="any"
 PKG_LICENSE="GPLv3+"
 PKG_SITE="https://www.samba.org"
diff --git a/packages/network/samba/patches/samba-953-backport-misleading-file-exists-fix.patch b/packages/network/samba/patches/samba-953-backport-misleading-file-exists-fix.patch
deleted file mode 100644
index c85f8121221..00000000000
--- a/packages/network/samba/patches/samba-953-backport-misleading-file-exists-fix.patch
+++ /dev/null
@@ -1,41 +0,0 @@
-From 7470b9b18af282a742929d3fc90f4be5520428a1 Mon Sep 17 00:00:00 2001
-From: David Mulder <dmulder@suse.com>
-Date: Thu, 2 Nov 2017 08:25:11 -0600
-Subject: [PATCH] smbc_opendir should not return EEXIST with invalid login
- credentials
-
-Signed-off-by: David Mulder <dmulder@suse.com>
-
-Reviewed-by: Andreas Schneider <asn@samba.org>
-Reviewed-by: Jim McDonough <jmcd@samba.org>
-
-Autobuild-User(master): Jim McDonough <jmcd@samba.org>
-Autobuild-Date(master): Thu Nov  9 01:49:06 CET 2017 on sn-devel-144
----
- source3/libsmb/libsmb_server.c | 4 ++--
- 1 file changed, 2 insertions(+), 2 deletions(-)
-
-diff --git a/source3/libsmb/libsmb_server.c b/source3/libsmb/libsmb_server.c
-index b0e5926fa65..93b9e800910 100644
---- a/source3/libsmb/libsmb_server.c
-+++ b/source3/libsmb/libsmb_server.c
-@@ -351,8 +351,8 @@ SMBC_server_internal(TALLOC_CTX *ctx,
- 						  "?????",
- 						  *pp_password);
- 			if (!NT_STATUS_IS_OK(status)) {
--                                errno = map_errno_from_nt_status(status);
-                                 cli_shutdown(srv->cli);
-+                                errno = map_errno_from_nt_status(status);
- 				srv->cli = NULL;
-                                 smbc_getFunctionRemoveCachedServer(context)(context,
-                                                                             srv);
-@@ -562,8 +562,8 @@ SMBC_server_internal(TALLOC_CTX *ctx,
- 
- 	status = cli_tree_connect_creds(c, share, "?????", creds);
- 	if (!NT_STATUS_IS_OK(status)) {
--		errno = map_errno_from_nt_status(status);
- 		cli_shutdown(c);
-+		errno = map_errno_from_nt_status(status);
- 		return NULL;
- 	}
- 
