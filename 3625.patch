From 6ff8aeb801ac0c4edf8fa4d9f993c983b92ce0a9 Mon Sep 17 00:00:00 2001
From: 5schatten <supervisedthinking@gmail.com>
Date: Sat, 29 Jun 2019 22:01:00 +0200
Subject: [PATCH 1/5] containerd: updated to v1.2.7

---
 packages/addons/addon-depends/containerd/package.mk | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/packages/addons/addon-depends/containerd/package.mk b/packages/addons/addon-depends/containerd/package.mk
index 6e0c4ecdf8a..e134e8b7471 100644
--- a/packages/addons/addon-depends/containerd/package.mk
+++ b/packages/addons/addon-depends/containerd/package.mk
@@ -3,8 +3,8 @@
 # Copyright (C) 2016-present Team LibreELEC (https://libreelec.tv)
 
 PKG_NAME="containerd"
-PKG_VERSION="1.2.6"
-PKG_SHA256="f2d578b743fb9faa5b3477b7cf4b33d00501087043a53b27754f14bbe741f891"
+PKG_VERSION="1.2.7"
+PKG_SHA256="7179c709a0d187708a1eeddcbdecd7206b2c642dc4413bcdb049cd6b38d06801"
 PKG_LICENSE="APL"
 PKG_SITE="https://containerd.tools/"
 PKG_URL="https://github.com/containerd/containerd/archive/v$PKG_VERSION.tar.gz"

From 631ce0b9b9c5f6e858cc32ed1af61fccb1a382cb Mon Sep 17 00:00:00 2001
From: 5schatten <supervisedthinking@gmail.com>
Date: Sat, 29 Jun 2019 22:01:17 +0200
Subject: [PATCH 2/5] go: updated to v1.12.6

---
 packages/addons/addon-depends/go/package.mk | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/packages/addons/addon-depends/go/package.mk b/packages/addons/addon-depends/go/package.mk
index 7506b92a847..9630862f3be 100644
--- a/packages/addons/addon-depends/go/package.mk
+++ b/packages/addons/addon-depends/go/package.mk
@@ -3,8 +3,8 @@
 # Copyright (C) 2016-present Team LibreELEC (https://libreelec.tv)
 
 PKG_NAME="go"
-PKG_VERSION="1.12.3"
-PKG_SHA256="b710a65982e9001ef99a167cf6e8636e46ec36a10e487e7c1c7384cdcd6fcd7c"
+PKG_VERSION="1.12.6"
+PKG_SHA256="d61ff8fa5685b911653c8153de6e6501728ec3aee26a9d5a56880bab3120426b"
 PKG_LICENSE="BSD"
 PKG_SITE="https://golang.org"
 PKG_URL="https://github.com/golang/go/archive/${PKG_NAME}${PKG_VERSION}.tar.gz"

From 743dc06a9c3e112da9dc844c86d1a4dd091014b8 Mon Sep 17 00:00:00 2001
From: 5schatten <supervisedthinking@gmail.com>
Date: Sat, 29 Jun 2019 22:01:32 +0200
Subject: [PATCH 3/5] libnetwork: updated to git e7933d4

---
 packages/addons/addon-depends/libnetwork/package.mk | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/packages/addons/addon-depends/libnetwork/package.mk b/packages/addons/addon-depends/libnetwork/package.mk
index 96c58bb74ed..4b72301235f 100644
--- a/packages/addons/addon-depends/libnetwork/package.mk
+++ b/packages/addons/addon-depends/libnetwork/package.mk
@@ -3,8 +3,8 @@
 # Copyright (C) 2016-present Team LibreELEC (https://libreelec.tv)
 
 PKG_NAME="libnetwork"
-PKG_VERSION="4725f2163fb214a6312f3beae5991f838ec36326"
-PKG_SHA256="049bddc1e584f30c29e0fed8716b3c7023d4bb31789d7c3aa48d17b979f1522b"
+PKG_VERSION="e7933d41e7b206756115aa9df5e0599fc5169742"
+PKG_SHA256="b9695c4d7711487543b2eff8ca74cc2deb9828f7f4582196324d39d20eab3855"
 PKG_LICENSE="APL"
 PKG_SITE="https://github.com/docker/libnetwork"
 PKG_URL="https://github.com/docker/libnetwork/archive/${PKG_VERSION}.tar.gz"

From 41f5a5a3a0dd13585da131f729f7b5e048a7c36b Mon Sep 17 00:00:00 2001
From: 5schatten <supervisedthinking@gmail.com>
Date: Sat, 29 Jun 2019 22:01:51 +0200
Subject: [PATCH 4/5] runc: updated to v1.0.0-rc8

---
 packages/addons/addon-depends/runc/package.mk | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/packages/addons/addon-depends/runc/package.mk b/packages/addons/addon-depends/runc/package.mk
index 5af614f5ff8..077b64777dc 100644
--- a/packages/addons/addon-depends/runc/package.mk
+++ b/packages/addons/addon-depends/runc/package.mk
@@ -3,8 +3,8 @@
 # Copyright (C) 2016-present Team LibreELEC (https://libreelec.tv)
 
 PKG_NAME="runc"
-PKG_VERSION="v1.0.0-rc7"
-PKG_SHA256="e8388b812d93a8a131a2a2fdd851847295c8e341721002940dadd2999fb81b51"
+PKG_VERSION="v1.0.0-rc8"
+PKG_SHA256="efe4ff9bbe49b19074346d65c914d809c0a3e90d062ea9619fe240f931f0b700"
 PKG_LICENSE="APL"
 PKG_SITE="https://github.com/opencontainers/runc"
 PKG_URL="https://github.com/opencontainers/runc/archive/${PKG_VERSION}.tar.gz"

From a16df5ef7484f5ec91717c386ac2938bc12dbe25 Mon Sep 17 00:00:00 2001
From: 5schatten <supervisedthinking@gmail.com>
Date: Sat, 29 Jun 2019 22:03:41 +0200
Subject: [PATCH 5/5] docker: updated to 18.09.7 / updated Kodi addon storage
 location patch

---
 packages/addons/service/docker/changelog.txt  |  3 ++
 packages/addons/service/docker/package.mk     |  6 +--
 ...ocker-001-use-addon-storage-location.patch | 51 ++++++++++++-------
 3 files changed, 40 insertions(+), 20 deletions(-)

diff --git a/packages/addons/service/docker/changelog.txt b/packages/addons/service/docker/changelog.txt
index 7418bc3bbf4..90cff0a2350 100644
--- a/packages/addons/service/docker/changelog.txt
+++ b/packages/addons/service/docker/changelog.txt
@@ -1,3 +1,6 @@
+126
+- Update to docker 18.09.7
+
 125
 - Update to docker 18.09.5
 
diff --git a/packages/addons/service/docker/package.mk b/packages/addons/service/docker/package.mk
index 94164388b99..eb00da95688 100644
--- a/packages/addons/service/docker/package.mk
+++ b/packages/addons/service/docker/package.mk
@@ -3,9 +3,9 @@
 # Copyright (C) 2017-present Team LibreELEC (https://libreelec.tv)
 
 PKG_NAME="docker"
-PKG_VERSION="18.09.5"
-PKG_SHA256="57f2a5d3374d86a8eb680c91df4351f5cb648351b9b32520c6fd2d66e7e97fd5"
-PKG_REV="125"
+PKG_VERSION="18.09.7"
+PKG_SHA256="f05dc15f5c11635472534c3aaf759c39c1bba842dd1ac23059431c2fd1ae1795"
+PKG_REV="126"
 PKG_ARCH="any"
 PKG_LICENSE="ASL"
 PKG_SITE="http://www.docker.com/"
diff --git a/packages/addons/service/docker/patches/docker-001-use-addon-storage-location.patch b/packages/addons/service/docker/patches/docker-001-use-addon-storage-location.patch
index 7ee7ea04449..782eca21c5c 100644
--- a/packages/addons/service/docker/patches/docker-001-use-addon-storage-location.patch
+++ b/packages/addons/service/docker/patches/docker-001-use-addon-storage-location.patch
@@ -1,8 +1,25 @@
-From 9979cbaa4d0108da552fd452294788a042766995 Mon Sep 17 00:00:00 2001
+From de25daa9281709a90e4dc23b4c27cbcdcef32fd3 Mon Sep 17 00:00:00 2001
 From: 5schatten <supervisedthinking@gmail.com>
-Date: Wed, 7 Nov 2018 12:22:23 +0100
+Date: Sat, 29 Jun 2019 17:58:09 +0200
 Subject: [PATCH] use Kodi addon storage location
 
+---
+ .../github.com/docker/docker/registry/config_unix.go |  2 +-
+ .../github.com/docker/docker/registry/endpoint_v1.go |  2 +-
+ components/engine/cmd/dockerd/daemon_unix.go         |  4 ++--
+ components/engine/daemon/config/config_test.go       |  2 +-
+ .../engine/integration-cli/docker_cli_daemon_test.go | 12 ++++++------
+ .../docker_cli_external_volume_driver_unix_test.go   |  8 ++++----
+ .../integration-cli/docker_cli_network_unix_test.go  |  8 ++++----
+ .../engine/integration-cli/docker_cli_swarm_test.go  |  8 ++++----
+ .../integration/plugin/authz/authz_plugin_test.go    |  6 +++---
+ .../integration/plugin/graphdriver/external_test.go  |  6 +++---
+ components/engine/pkg/plugins/discovery_unix.go      |  2 +-
+ components/engine/pkg/plugins/plugins.go             |  2 +-
+ components/engine/registry/config_unix.go            |  2 +-
+ components/engine/registry/endpoint_v1.go            |  2 +-
+ 14 files changed, 33 insertions(+), 33 deletions(-)
+
 diff --git a/components/cli/vendor/github.com/docker/docker/registry/config_unix.go b/components/cli/vendor/github.com/docker/docker/registry/config_unix.go
 index 20fb47bcae..a023df7895 100644
 --- a/components/cli/vendor/github.com/docker/docker/registry/config_unix.go
@@ -65,7 +82,7 @@ index 6998ed3312..c255b62146 100644
  	flags.String("config-file", configFile, "")
  	err := Reload(configFile, flags, func(c *Config) {
 diff --git a/components/engine/integration-cli/docker_cli_daemon_test.go b/components/engine/integration-cli/docker_cli_daemon_test.go
-index 986cc27530..7a0c2805cd 100644
+index d3cd5f1676..b5e504489d 100644
 --- a/components/engine/integration-cli/docker_cli_daemon_test.go
 +++ b/components/engine/integration-cli/docker_cli_daemon_test.go
 @@ -546,11 +546,11 @@ func (s *DockerDaemonSuite) TestDaemonAllocatesListeningPort(c *check.C) {
@@ -121,11 +138,11 @@ index da8bb7e011..605a162e79 100644
  
 -	err := os.MkdirAll("/etc/docker/plugins", 0755)
 +	err := os.MkdirAll("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins", 0755)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  
 -	err = ioutil.WriteFile("/etc/docker/plugins/"+name+".spec", []byte(s.Server.URL), 0644)
 +	err = ioutil.WriteFile("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins/"+name+".spec", []byte(s.Server.URL), 0644)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  	return s
  }
 @@ -278,7 +278,7 @@ func newVolumePlugin(c *check.C, name string) *volumePlugin {
@@ -134,7 +151,7 @@ index da8bb7e011..605a162e79 100644
  
 -	err := os.RemoveAll("/etc/docker/plugins")
 +	err := os.RemoveAll("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins")
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  }
  
 @@ -371,7 +371,7 @@ func hostVolumePath(name string) string {
@@ -156,17 +173,17 @@ index d3d6256a75..a0f0ae973d 100644
  
 -	err := os.MkdirAll("/etc/docker/plugins", 0755)
 +	err := os.MkdirAll("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins", 0755)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  
 -	fileName := fmt.Sprintf("/etc/docker/plugins/%s.spec", netDrv)
 +	fileName := fmt.Sprintf("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins/%s.spec", netDrv)
  	err = ioutil.WriteFile(fileName, []byte(url), 0644)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  
 -	ipamFileName := fmt.Sprintf("/etc/docker/plugins/%s.spec", ipamDrv)
 +	ipamFileName := fmt.Sprintf("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins/%s.spec", ipamDrv)
  	err = ioutil.WriteFile(ipamFileName, []byte(url), 0644)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  }
 @@ -227,7 +227,7 @@ func (s *DockerNetworkSuite) TearDownSuite(c *check.C) {
  
@@ -174,11 +191,11 @@ index d3d6256a75..a0f0ae973d 100644
  
 -	err := os.RemoveAll("/etc/docker/plugins")
 +	err := os.RemoveAll("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins")
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  }
  
 diff --git a/components/engine/integration-cli/docker_cli_swarm_test.go b/components/engine/integration-cli/docker_cli_swarm_test.go
-index 9f99d0c849..2d9a4b088e 100644
+index f6fadcf995..5d0b5256c1 100644
 --- a/components/engine/integration-cli/docker_cli_swarm_test.go
 +++ b/components/engine/integration-cli/docker_cli_swarm_test.go
 @@ -783,14 +783,14 @@ func setupRemoteGlobalNetworkPlugin(c *check.C, mux *http.ServeMux, url, netDrv,
@@ -187,17 +204,17 @@ index 9f99d0c849..2d9a4b088e 100644
  
 -	err := os.MkdirAll("/etc/docker/plugins", 0755)
 +	err := os.MkdirAll("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins", 0755)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  
 -	fileName := fmt.Sprintf("/etc/docker/plugins/%s.spec", netDrv)
 +	fileName := fmt.Sprintf("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins/%s.spec", netDrv)
  	err = ioutil.WriteFile(fileName, []byte(url), 0644)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  
 -	ipamFileName := fmt.Sprintf("/etc/docker/plugins/%s.spec", ipamDrv)
 +	ipamFileName := fmt.Sprintf("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins/%s.spec", ipamDrv)
  	err = ioutil.WriteFile(ipamFileName, []byte(url), 0644)
- 	c.Assert(err, checker.IsNil)
+ 	assert.NilError(c, err)
  }
 @@ -802,7 +802,7 @@ func (s *DockerSwarmSuite) TestSwarmNetworkPlugin(c *check.C) {
  	setupRemoteGlobalNetworkPlugin(c, mux, s.server.URL, globalNetworkPlugin, globalIPAMPlugin)
@@ -205,11 +222,11 @@ index 9f99d0c849..2d9a4b088e 100644
  		s.server.Close()
 -		err := os.RemoveAll("/etc/docker/plugins")
 +		err := os.RemoveAll("/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins")
- 		c.Assert(err, checker.IsNil)
+ 		assert.NilError(c, err)
  	}()
  
 diff --git a/components/engine/integration/plugin/authz/authz_plugin_test.go b/components/engine/integration/plugin/authz/authz_plugin_test.go
-index d0f5d8a783..ba626c6310 100644
+index 105affc1af..fa631a377a 100644
 --- a/components/engine/integration/plugin/authz/authz_plugin_test.go
 +++ b/components/engine/integration/plugin/authz/authz_plugin_test.go
 @@ -55,15 +55,15 @@ func setupTestV1(t *testing.T) func() {
@@ -268,7 +285,7 @@ index 58058f2828..a7b449ca25 100644
 -var specsPaths = []string{"/etc/docker/plugins", "/usr/lib/docker/plugins"}
 +var specsPaths = []string{"/storage/.kodi/userdata/addon_data/service.system.docker/config/plugins", "/usr/lib/docker/plugins"}
 diff --git a/components/engine/pkg/plugins/plugins.go b/components/engine/pkg/plugins/plugins.go
-index 28c06ff693..c24cad2b63 100644
+index 6962079df9..77b69265b1 100644
 --- a/components/engine/pkg/plugins/plugins.go
 +++ b/components/engine/pkg/plugins/plugins.go
 @@ -4,7 +4,7 @@
