diff -up chromium-60.0.3112.40/third_party/pdfium/BUILD.gn.pdfium-system-libtiff-libpng chromium-60.0.3112.40/third_party/pdfium/BUILD.gn
--- chromium-60.0.3112.40/third_party/pdfium/BUILD.gn.pdfium-system-libtiff-libpng	2017-06-22 00:04:09.000000000 +0200
+++ chromium-60.0.3112.40/third_party/pdfium/BUILD.gn	2017-06-24 00:05:50.521671902 +0200
@@ -19,7 +19,6 @@ config("pdfium_common_config") {
   ldflags = []
   include_dirs = [ "." ]
   defines = [
-    "OPJ_STATIC",
     "PNG_PREFIX",
     "PNG_USE_READ_MACROS",
   ]
@@ -668,6 +667,7 @@
   deps = [
     ":fxcrt",
     "third_party:lcms2",
+    "third_party:fx_libopenjpeg",
   ]
 }
 
@@ -685,6 +685,7 @@
   configs += [ ":pdfium_core_config" ]
   deps = [
     ":fxcrt",
+    "third_party:fx_libopenjpeg",
   ]
 }
 
diff -up chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/ccodec_tiffmodule.cpp.pdfium-system-libtiff-libpng chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/ccodec_tiffmodule.cpp
--- chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/ccodec_tiffmodule.cpp.pdfium-system-libtiff-libpng	2017-06-22 00:04:10.000000000 +0200
+++ chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/ccodec_tiffmodule.cpp	2017-06-24 00:05:50.524671846 +0200
@@ -17,9 +17,7 @@
 #include "third_party/base/logging.h"
 #include "third_party/base/ptr_util.h"
 
-extern "C" {
-#include "third_party/libtiff/tiffiop.h"
-}
+#include <tiffio.h>
 
 class CTiffContext : public CCodec_TiffModule::Context {
  public:
@@ -176,7 +174,7 @@
                              tiff_write, tiff_seek, tiff_close, tiff_get_size,
                              tiff_map, tiff_unmap);
   if (tif) {
-    tif->tif_fd = (int)(intptr_t)context;
+    (void)TIFFSetFileno(tif, (int)(intptr_t)context);
   }
   return tif;
 }
diff -up chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/cjpx_decoder.h.pdfium-system-libtiff-libpng chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/cjpx_decoder.h
--- chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/cjpx_decoder.h.pdfium-system-libtiff-libpng	2017-06-24 00:05:50.526671809 +0200
+++ chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/cjpx_decoder.h	2017-06-25 12:29:14.039984794 +0200
@@ -12,7 +12,7 @@
 
 #include "core/fxcodec/codec/codec_int.h"
 #include "core/fxcrt/unowned_ptr.h"
-#include "third_party/libopenjpeg20/openjpeg.h"
+#include <openjpeg.h>
 
 class CPDF_ColorSpace;
 
diff -up chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/codec_int.h.pdfium-system-libtiff-libpng chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/codec_int.h
--- chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/codec_int.h.pdfium-system-libtiff-libpng	2017-06-22 00:04:10.000000000 +0200
+++ chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/codec_int.h	2017-06-24 00:05:50.521671902 +0200
@@ -15,7 +15,7 @@
 #include <vector>
 
 #include "core/fxcodec/jbig2/JBig2_Context.h"
-#include "third_party/libopenjpeg20/openjpeg.h"
+#include <openjpeg.h>
 
 class CPDF_ColorSpace;
 
diff -up chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/fx_codec_jpx_opj.cpp.pdfium-system-libtiff-libpng chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/fx_codec_jpx_opj.cpp
--- chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/fx_codec_jpx_opj.cpp.pdfium-system-libtiff-libpng	2017-06-22 00:04:10.000000000 +0200
+++ chromium-60.0.3112.40/third_party/pdfium/core/fxcodec/codec/fx_codec_jpx_opj.cpp	2017-06-24 00:26:21.330902789 +0200
@@ -16,8 +16,12 @@
 #include "core/fxcrt/fx_memory.h"
 #include "core/fxcrt/fx_safe_types.h"
 #include "third_party/base/ptr_util.h"
-#include "third_party/libopenjpeg20/openjpeg.h"
-#include "third_party/libopenjpeg20/opj_malloc.h"
+#include <openjpeg.h>
+//#include <opj_malloc.h>
+extern "C" {
+extern void * opj_calloc(size_t, size_t);
+extern void opj_free(void *);
+}
 
 namespace {
 
@@ -484,7 +488,7 @@
     m_Image = nullptr;
     return false;
   }
-  m_Image->pdfium_use_colorspace = !!m_ColorSpace;
+//  m_Image->pdfium_use_colorspace = !!m_ColorSpace;
 
   if (!m_Parameters.nb_tile_to_decode) {
     if (!opj_set_decode_area(m_Codec, m_Image, m_Parameters.DA_x0,
diff -up chromium-60.0.3112.40/third_party/pdfium/third_party/BUILD.gn.pdfium-system-libtiff-libpng chromium-60.0.3112.40/third_party/pdfium/third_party/BUILD.gn
