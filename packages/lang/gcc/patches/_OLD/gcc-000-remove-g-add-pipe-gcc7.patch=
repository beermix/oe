diff --git a/config/acinclude.m4 b/config/acinclude.m4
index 8242b2c7a8a..f73b4829cc3 100644
--- a/config/acinclude.m4
+++ b/config/acinclude.m4
@@ -24,7 +24,7 @@ dnl normal versions of a library), tasteless as that idea is.
   if test "$ac_test_CXXFLAGS" = set; then
     CXXFLAGS="$ac_save_CXXFLAGS"
   elif test $ac_cv_prog_cxx_g = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-O2"
   fi
@@ -121,7 +121,7 @@ dnl normal versions of a library), tasteless as that idea is.
   if test "$ac_test_CFLAGS" = set; then
     CFLAGS="$ac_save_CFLAGS"
   elif test $ac_cv_prog_cc_g = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-O2"
   fi
diff --git a/configure b/configure
index 32a38633ad8..ab9c6c3ee8f 100755
--- a/configure
+++ b/configure
@@ -4644,7 +4644,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4992,7 +4992,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
@@ -6702,7 +6702,7 @@ fi
 # CFLAGS_FOR_TARGET and CXXFLAGS_FOR_TARGET.
 if test "x$CFLAGS_FOR_TARGET" = x; then
   if test "x${is_cross_compiler}" = xyes; then
-    CFLAGS_FOR_TARGET="-g -O2"
+    CFLAGS_FOR_TARGET="-O2 -pipe"
   else
     CFLAGS_FOR_TARGET=$CFLAGS
     case " $CFLAGS " in
@@ -6719,7 +6719,7 @@ fi
 
 if test "x$CXXFLAGS_FOR_TARGET" = x; then
   if test "x${is_cross_compiler}" = xyes; then
-    CXXFLAGS_FOR_TARGET="-g -O2"
+    CXXFLAGS_FOR_TARGET="-O2 -pipe"
   else
     CXXFLAGS_FOR_TARGET=$CXXFLAGS
     case " $CXXFLAGS " in
diff --git a/configure.ac b/configure.ac
index 12377499295..9ac80b4a680 100644
--- a/configure.ac
+++ b/configure.ac
@@ -2300,7 +2300,7 @@ AC_SUBST(DEBUG_PREFIX_CFLAGS_FOR_TARGET)
 # CFLAGS_FOR_TARGET and CXXFLAGS_FOR_TARGET.
 if test "x$CFLAGS_FOR_TARGET" = x; then
   if test "x${is_cross_compiler}" = xyes; then
-    CFLAGS_FOR_TARGET="-g -O2"
+    CFLAGS_FOR_TARGET="-O2 -pipe"
   else
     CFLAGS_FOR_TARGET=$CFLAGS
     case " $CFLAGS " in
@@ -2317,7 +2317,7 @@ AC_SUBST(CFLAGS_FOR_TARGET)
 
 if test "x$CXXFLAGS_FOR_TARGET" = x; then
   if test "x${is_cross_compiler}" = xyes; then
-    CXXFLAGS_FOR_TARGET="-g -O2"
+    CXXFLAGS_FOR_TARGET="-O2 -pipe"
   else
     CXXFLAGS_FOR_TARGET=$CXXFLAGS
     case " $CXXFLAGS " in
diff --git a/fixincludes/configure b/fixincludes/configure
index ab97983f327..9318351babd 100755
--- a/fixincludes/configure
+++ b/fixincludes/configure
@@ -3924,7 +3924,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/gcc/configure b/gcc/configure
index 043a62b0de9..4547eacf373 100755
--- a/gcc/configure
+++ b/gcc/configure
@@ -4414,7 +4414,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4762,7 +4762,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/gnattools/configure b/gnattools/configure
index 8c75cc06eb5..fe458f54bc8 100755
--- a/gnattools/configure
+++ b/gnattools/configure
@@ -2755,7 +2755,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/gotools/config/go.m4 b/gotools/config/go.m4
index 2718276a39a..6beca87652e 100644
--- a/gotools/config/go.m4
+++ b/gotools/config/go.m4
@@ -87,6 +87,6 @@ ac_compiler=$[2]
 _AC_DO_LIMIT([$ac_compiler --version >&AS_MESSAGE_LOG_FD])
 m4_expand_once([_AC_COMPILER_EXEEXT])[]dnl
 m4_expand_once([_AC_COMPILER_OBJEXT])[]dnl
-GOCFLAGS="-g -O2"
+GOCFLAGS="-O2 -pipe"
 AC_LANG_POP(Go)dnl
 ])# AC_PROG_GO
diff --git a/gotools/configure b/gotools/configure
index d144125c040..c74bab40fd0 100755
--- a/gotools/configure
+++ b/gotools/configure
@@ -3259,7 +3259,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -3775,7 +3775,7 @@ $as_echo "$ac_try_echo"; } >&5
   fi
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }
-GOCFLAGS="-g -O2"
+GOCFLAGS="-O2 -pipe"
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
diff --git a/intl/configure b/intl/configure
index d7af03fc71d..d0fec7d0fc1 100755
--- a/intl/configure
+++ b/intl/configure
@@ -3288,7 +3288,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libada/configure b/libada/configure
index 17a52c81db2..2eef0b8449d 100755
--- a/libada/configure
+++ b/libada/configure
@@ -2685,7 +2685,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libatomic/configure b/libatomic/configure
index c05fc9d1141..7ca82cd5239 100755
--- a/libatomic/configure
+++ b/libatomic/configure
@@ -3880,7 +3880,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libbacktrace/configure b/libbacktrace/configure
index ee90bc6dea0..fbbeeba7fef 100755
--- a/libbacktrace/configure
+++ b/libbacktrace/configure
@@ -3287,7 +3287,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4806,7 +4806,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libcc1/configure b/libcc1/configure
index d6f480fe930..ffdd5498ff1 100755
--- a/libcc1/configure
+++ b/libcc1/configure
@@ -3164,7 +3164,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -11128,7 +11128,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libcilkrts/configure b/libcilkrts/configure
index 3cc8c999733..5df6ac4876c 100644
--- a/libcilkrts/configure
+++ b/libcilkrts/configure
@@ -3733,7 +3733,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4864,7 +4864,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -5340,7 +5340,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libcpp/configure b/libcpp/configure
index 12c1907ed40..68715010668 100755
--- a/libcpp/configure
+++ b/libcpp/configure
@@ -3485,7 +3485,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -3833,7 +3833,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libdecnumber/configure b/libdecnumber/configure
index 4cb732e80d4..f54b8fa60a0 100755
--- a/libdecnumber/configure
+++ b/libdecnumber/configure
@@ -2937,7 +2937,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libffi/configure b/libffi/configure
index 74b747b3b7e..24786766228 100755
--- a/libffi/configure
+++ b/libffi/configure
@@ -3967,7 +3967,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4506,7 +4506,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libgcc/configure b/libgcc/configure
index 9a7eb8446bb..b375d06746b 100644
--- a/libgcc/configure
+++ b/libgcc/configure
@@ -3814,7 +3814,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libgfortran/configure b/libgfortran/configure
index 81238fcb79c..630b0c613a1 100755
--- a/libgfortran/configure
+++ b/libgfortran/configure
@@ -4230,7 +4230,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -5406,7 +5406,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -12981,7 +12981,7 @@ if test "$ac_test_FCFLAGS" = set; then
   FCFLAGS=$ac_save_FCFLAGS
 elif test $ac_cv_prog_fc_g = yes; then
   if test "x$ac_cv_fc_compiler_gnu" = xyes; then
-    FCFLAGS="-g -O2"
+    FCFLAGS="-O2 -pipe"
   else
     FCFLAGS="-g"
   fi
diff --git a/libgo/config/go.m4 b/libgo/config/go.m4
index 65a27cbdf00..9dbc1cc61f9 100644
--- a/libgo/config/go.m4
+++ b/libgo/config/go.m4
@@ -87,6 +87,6 @@ ac_compiler=$[2]
 _AC_DO_LIMIT([$ac_compiler --version >&AS_MESSAGE_LOG_FD])
 m4_expand_once([_AC_COMPILER_EXEEXT])[]dnl
 m4_expand_once([_AC_COMPILER_OBJEXT])[]dnl
-GOCFLAGS="-g -O2"
+GOCFLAGS="-O2 -pipe"
 AC_LANG_POP(Go)dnl
 ])# AC_PROG_GO
diff --git a/libgo/config/libtool.m4 b/libgo/config/libtool.m4
index f7005947454..d3043ea8b57 100644
--- a/libgo/config/libtool.m4
+++ b/libgo/config/libtool.m4
@@ -7126,7 +7126,7 @@ AC_DEFUN([LT_PROG_GCJ],
 [m4_ifdef([AC_PROG_GCJ], [AC_PROG_GCJ],
   [m4_ifdef([A][M_PROG_GCJ], [A][M_PROG_GCJ],
     [AC_CHECK_TOOL(GCJ, gcj,)
-      test "x${GCJFLAGS+set}" = xset || GCJFLAGS="-g -O2"
+      test "x${GCJFLAGS+set}" = xset || GCJFLAGS="-O2 -pipe"
       AC_SUBST(GCJFLAGS)])])[]dnl
 ])
 
diff --git a/libgo/configure b/libgo/configure
index 1d3d714fc05..0d6e6a71fa0 100755
--- a/libgo/configure
+++ b/libgo/configure
@@ -3800,7 +3800,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4316,7 +4316,7 @@ $as_echo "$ac_try_echo"; } >&5
   fi
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }
-GOCFLAGS="-g -O2"
+GOCFLAGS="-O2 -pipe"
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
diff --git a/libgomp/configure b/libgomp/configure
index b7e9f40b852..22f05eab961 100755
--- a/libgomp/configure
+++ b/libgomp/configure
@@ -4033,7 +4033,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -11753,7 +11753,7 @@ if test "$ac_test_FCFLAGS" = set; then
   FCFLAGS=$ac_save_FCFLAGS
 elif test $ac_cv_prog_fc_g = yes; then
   if test "x$ac_cv_fc_compiler_gnu" = xyes; then
-    FCFLAGS="-g -O2"
+    FCFLAGS="-O2 -pipe"
   else
     FCFLAGS="-g"
   fi
diff --git a/libhsail-rt/configure b/libhsail-rt/configure
index a490125f5b3..42b0cb0cf2d 100755
--- a/libhsail-rt/configure
+++ b/libhsail-rt/configure
@@ -3707,7 +3707,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4246,7 +4246,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libiberty/configure b/libiberty/configure
index 868793558f0..2ee9d989fae 100755
--- a/libiberty/configure
+++ b/libiberty/configure
@@ -3619,7 +3619,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libitm/configure b/libitm/configure
index 775f370fbb5..6658b389e3e 100644
--- a/libitm/configure
+++ b/libitm/configure
@@ -4066,7 +4066,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4605,7 +4605,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libmpx/configure b/libmpx/configure
index 853993a522f..443cc17b5ee 100644
--- a/libmpx/configure
+++ b/libmpx/configure
@@ -3565,7 +3565,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4611,7 +4611,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libobjc/configure b/libobjc/configure
index abf5aed71cf..5603f288298 100755
--- a/libobjc/configure
+++ b/libobjc/configure
@@ -3205,7 +3205,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/liboffloadmic/configure b/liboffloadmic/configure
index e22b214ddbc..e6caa043443 100644
--- a/liboffloadmic/configure
+++ b/liboffloadmic/configure
@@ -3615,7 +3615,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4154,7 +4154,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/liboffloadmic/plugin/configure b/liboffloadmic/plugin/configure
index 8b8c041d2bf..40b48fd76aa 100644
--- a/liboffloadmic/plugin/configure
+++ b/liboffloadmic/plugin/configure
@@ -3527,7 +3527,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4066,7 +4066,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libquadmath/configure b/libquadmath/configure
index d2f13bf7751..f3550418394 100755
--- a/libquadmath/configure
+++ b/libquadmath/configure
@@ -3662,7 +3662,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -11409,7 +11409,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libsanitizer/configure b/libsanitizer/configure
index 8e0c47ea838..38de2177843 100755
--- a/libsanitizer/configure
+++ b/libsanitizer/configure
@@ -3344,7 +3344,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -5236,7 +5236,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -5584,7 +5584,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libssp/configure b/libssp/configure
index b14e922e6f1..74f26b7f1df 100755
--- a/libssp/configure
+++ b/libssp/configure
@@ -3603,7 +3603,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/libstdc++-v3/configure b/libstdc++-v3/configure
index e70fdd6421f..4237459fe40 100755
--- a/libstdc++-v3/configure
+++ b/libstdc++-v3/configure
@@ -4316,7 +4316,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4664,7 +4664,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/libtool.m4 b/libtool.m4
index 24d13f34409..1f5e79e52a8 100644
--- a/libtool.m4
+++ b/libtool.m4
@@ -7052,7 +7052,7 @@ AC_DEFUN([LT_PROG_GCJ],
 [m4_ifdef([AC_PROG_GCJ], [AC_PROG_GCJ],
   [m4_ifdef([A][M_PROG_GCJ], [A][M_PROG_GCJ],
     [AC_CHECK_TOOL(GCJ, gcj,)
-      test "x${GCJFLAGS+set}" = xset || GCJFLAGS="-g -O2"
+      test "x${GCJFLAGS+set}" = xset || GCJFLAGS="-O2 -pipe"
       AC_SUBST(GCJFLAGS)])])[]dnl
 ])
 
diff --git a/libvtv/configure b/libvtv/configure
index c3bed2dfc70..4d09e6a9856 100755
--- a/libvtv/configure
+++ b/libvtv/configure
@@ -3215,7 +3215,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -5080,7 +5080,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -5428,7 +5428,7 @@ if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
   if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
+    CXXFLAGS="-O2 -pipe"
   else
     CXXFLAGS="-g"
   fi
diff --git a/lto-plugin/configure b/lto-plugin/configure
index cdea9eac3ee..cf8f4caff64 100755
--- a/lto-plugin/configure
+++ b/lto-plugin/configure
@@ -3717,7 +3717,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
@@ -4845,7 +4845,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
diff --git a/zlib/configure b/zlib/configure
index ee5527c4a40..a2459062e62 100755
--- a/zlib/configure
+++ b/zlib/configure
@@ -3597,7 +3597,7 @@ if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
+    CFLAGS="-O2 -pipe"
   else
     CFLAGS="-g"
   fi
