Description: Also parse --help output of aptitude 0.7.5 and later
Author: Axel Beckert <abe@debian.org>
Bug-Debian: https://bugs.debian.org/807906
Forwarded: http://www.zsh.org/mla/workers/2015/msg03350.html

Index: zsh/Completion/Debian/Command/_aptitude
===================================================================
--- zsh.orig/Completion/Debian/Command/_aptitude	2015-09-08 23:39:06.026975805 +0200
+++ zsh/Completion/Debian/Command/_aptitude	2015-12-26 19:26:14.681265798 +0100
@@ -80,7 +80,7 @@
 
 case $state in
   cmds)
-    cmds=( ${${(M)${(f)"$(LC_ALL=C _call_program commands aptitude -h 2>/dev/null)"}:#* - *}/(#b) (*[^ ]) #- (*)/$match[1]:$match[2]:l})
+    cmds=( ${${(M)${(f)"$(LC_ALL=C _call_program commands aptitude -h 2>/dev/null)"}:# [^- ][^ ]## *}/(#b) ([^ ]##) ##(- )#([^- ]*)/$match[1]:$match[3]:l})
 
     _describe -t commands 'aptitude command' cmds && ret=0
   ;;
