--- a/lib/Autom4te/FileUtils.pm
+++ b/lib/Autom4te/FileUtils.pm
@@ -161,21 +161,20 @@ sub update_file ($$;$)
       return
     }
 
-  if (-f "$to")
+  my $exists = (-f "$to");
+  if ($exists)
     {
-      # Back up and install the new one.
+      # Back up any existing destination.
       move ("$to",  "$to$SIMPLE_BACKUP_SUFFIX")
 	or fatal "cannot backup $to: $!";
-      move ("$from", "$to")
-	or fatal "cannot rename $from as $to: $!";
-      msg 'note', "'$to' is updated";
-    }
-  else
-    {
-      move ("$from", "$to")
-	or fatal "cannot rename $from as $to: $!";
-      msg 'note', "'$to' is created";
     }
+
+  # Do not use move ("$from", "$to"), as it truncates file timestamps.
+  rename ("$from", "$to")
+    or system ("mv", "$from", "$to") == 0
+    or fatal "cannot rename $from as $to: $!";
+
+  msg 'note', ($exists ? "'$to' is updated" : "'$to is created")
 }
 
 
diff --git a/lib/Autom4te/General.pm b/lib/Autom4te/General.pm
index 925b2531..6162fd52 100644
--- a/lib/Autom4te/General.pm
+++ b/lib/Autom4te/General.pm
@@ -13,7 +13,7 @@
 # GNU General Public License for more details.
 
 # You should have received a copy of the GNU General Public License
-# along with this program.  If not, see <http://www.gnu.org/licenses/>.
+# along with this program.  If not, see <https://www.gnu.org/licenses/>.
 
 package Autom4te::General;
 
diff --git a/lib/autoconf/c.m4 b/lib/autoconf/c.m4
index e66b1580..42c6ac1b 100644
--- a/lib/autoconf/c.m4
+++ b/lib/autoconf/c.m4
@@ -1845,8 +1845,7 @@ fi
 
 # AC_C_RESTRICT
 # -------------
-# based on acx_restrict.m4, from the GNU Autoconf Macro Archive at:
-# http://autoconf-archive.cryp.to/acx_restrict.html
+# based on acx_restrict.m4, from the GNU Autoconf Macro Archive
 #
 # Determine whether the C/C++ compiler supports the "restrict" keyword
 # introduced in ANSI C99, or an equivalent.  Define "restrict" to the alternate
diff --git a/lib/autoconf/general.m4 b/lib/autoconf/general.m4
index 8a64b1de..58f7a64c 100644
--- a/lib/autoconf/general.m4
+++ b/lib/autoconf/general.m4
@@ -1183,6 +1183,27 @@ fi])dnl
 m4_define([_AC_INIT_CONFIG_LOG],
 [m4_divert_text([INIT_PREPARE],
 [m4_define([AS_MESSAGE_LOG_FD], 5)dnl
+ac_configure_args_raw=
+for ac_arg
+do
+  case $ac_arg in
+  *\'*)
+    ac_arg=`AS_ECHO(["$ac_arg"]) | sed "s/'/'\\\\\\\\''/g"` ;;
+  esac
+  AS_VAR_APPEND([ac_configure_args_raw], [" '$ac_arg'"])
+done
+
+case $ac_configure_args_raw in
+  *$as_nl*)
+    ac_safe_unquote= ;;
+  *)
+    ac_unsafe_z='|&;<>()$`\\"*?@<:@ ''	' # This string ends in space, tab.
+    ac_unsafe_a="$ac_unsafe_z#~"
+    ac_safe_unquote="s/ '\\([[^$ac_unsafe_a]][[^$ac_unsafe_z]]*\\)'/ \\1/g"
+    ac_configure_args_raw=`dnl
+      AS_ECHO(["$ac_configure_args_raw"]) | sed "$ac_safe_unquote"`;;
+esac
+
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
@@ -1191,7 +1212,7 @@ It was created by m4_ifset([AC_PACKAGE_NAME], [AC_PACKAGE_NAME ])dnl
 $as_me[]m4_ifset([AC_PACKAGE_VERSION], [ AC_PACKAGE_VERSION]), which was
 generated by m4_PACKAGE_STRING.  Invocation command line was
 
-  $ $[0] $[@]
+  $ $[0]$ac_configure_args_raw
 
 _ACEOF
 exec AS_MESSAGE_LOG_FD>>config.log
diff --git a/lib/autoconf/headers.m4 b/lib/autoconf/headers.m4
index c6e659c2..fbc3d07e 100644
--- a/lib/autoconf/headers.m4
+++ b/lib/autoconf/headers.m4
@@ -484,8 +484,6 @@ fi
 
 # AC_HEADER_RESOLV
 # ----------------
-# According to http://www.mcsr.olemiss.edu/cgi-bin/man-cgi?resolver+3
-# (or http://www.chemie.fu-berlin.de/cgi-bin/man/sgi_irix?resolver+3),
 # sys/types.h, netinet/in.h and arpa/nameser.h are required on IRIX.
 # netinet/in.h is needed on Cygwin, too.
 # With Solaris 9, netdb.h is required, to get symbols like HOST_NOT_FOUND.
diff --git a/lib/autoconf/specific.m4 b/lib/autoconf/specific.m4
index 573f017c..99cc6044 100644
--- a/lib/autoconf/specific.m4
+++ b/lib/autoconf/specific.m4
@@ -130,7 +130,7 @@ rm -rf conftest*[]dnl
 # By default, many hosts won't let programs access large files;
 # one must use special compiler options to get large-file access to work.
 # For more details about this brain damage please see:
-# http://www.unix-systems.org/version2/whatsnew/lfs20mar.html
+# http://www.unix.org/version2/whatsnew/lfs20mar.html
 AC_DEFUN([AC_SYS_LARGEFILE],
 [AC_ARG_ENABLE(largefile,
 	       [  --disable-largefile     omit support for large files])
diff --git a/lib/autoconf/status.m4 b/lib/autoconf/status.m4
index 30a8a60c..69465bd0 100644
--- a/lib/autoconf/status.m4
+++ b/lib/autoconf/status.m4
@@ -1431,8 +1431,10 @@ m4_if(m4_index(m4_defn([AC_PACKAGE_NAME]), [GNU ]), [0], [
 General help using GNU software: <https://www.gnu.org/gethelp/>.])])"
 
 _ACEOF
+ac_cs_config=`AS_ECHO(["$ac_configure_args"]) | sed "$ac_safe_unquote"`
+ac_cs_config_escaped=`AS_ECHO(["$ac_cs_config"]) | sed "s/^ //; s/'/'\\\\\\\\''/g"`
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
-ac_cs_config="`AS_ECHO(["$ac_configure_args"]) | sed 's/^ //; s/[[\\""\`\$]]/\\\\&/g'`"
+ac_cs_config='$ac_cs_config_escaped'
 ac_cs_version="\\
 m4_ifset([AC_PACKAGE_NAME], [AC_PACKAGE_NAME ])config.status[]dnl
 m4_ifset([AC_PACKAGE_VERSION], [ AC_PACKAGE_VERSION])
diff --git a/tests/base.at b/tests/base.at
index 14809d40..d9a084b6 100644
--- a/tests/base.at
+++ b/tests/base.at
@@ -227,7 +227,7 @@ AT_SETUP([AC_INIT with unusual version strings])
 
 AT_DATA([configure.ac],
 [[AC_INIT([GNU String++ with  spaces (foo)],
-	  [2.48++  (2010-07-03)], [[http://example.com/?a=b&c=d#e]], [clisp])
+	  [2.48++  (2010-07-03)], [[https://example.com/?a=b&c=d#e]], [clisp])
 AC_OUTPUT
 ]])
 
@@ -253,7 +253,7 @@ AT_CHECK([$FGREP '2.48++  (2010-07-03)' stdout], [], [ignore])
 
 AT_DATA([configure.ac],
 [[AC_INIT([GNU "String++"],
-	  [2.48], [http://example.com/], [clisp])
+	  [2.48], [https://example.com/], [clisp])
 AC_OUTPUT
 ]])
 
@@ -262,7 +262,7 @@ AT_CHECK([grep 'AC_INIT: not a literal: ' stderr], [], [ignore])
 
 AT_DATA([configure.ac],
 [[AC_INIT([GNU String++],
-	  ['codename' 2.48], [http://example.com/], [clisp])
+	  ['codename' 2.48], [https://example.com/], [clisp])
 AC_OUTPUT
 ]])
 
@@ -271,7 +271,7 @@ AT_CHECK([grep 'AC_INIT: not a literal: ' stderr], [], [ignore])
 
 AT_DATA([configure.ac],
 [[AC_INIT([GNU
-String++], [2.48], [http://example.com/], [clisp])
+String++], [2.48], [https://example.com/], [clisp])
 AC_OUTPUT
 ]])
 
diff --git a/tests/compile.at b/tests/compile.at
index a54d74ec..29374529 100644
--- a/tests/compile.at
+++ b/tests/compile.at
@@ -178,7 +178,7 @@ AT_DATA([configure.ac],
 [[# Taken from autoconf.texi:Generating Sources.
 # The only change is to not fail if gcc doesn't work.
 AC_INIT([Hello], [1.0], [bug-hello@example.org], [],
-        [http://www.example.org/])
+        [https://www.example.org/])
 AC_DEFINE([HELLO_WORLD], ["Hello, World\n"],
   [Greetings string.])
 AC_LANG([C])
@@ -199,7 +199,7 @@ AT_CHECK([sed -n 's/ *$//; /#define PACKAGE/,$p' stdout], [],
 #define PACKAGE_VERSION "1.0"
 #define PACKAGE_STRING "Hello 1.0"
 #define PACKAGE_BUGREPORT "bug-hello@example.org"
-#define PACKAGE_URL "http://www.example.org/"
+#define PACKAGE_URL "https://www.example.org/"
 #define HELLO_WORLD "Hello, World\n"
 
 const char hw[] = "Hello, World\n";
@@ -223,7 +223,7 @@ AT_DATA([configure.ac],
 [[# Taken from autoconf.texi:Generating Sources.
 # The only change is to not fail if gcc doesn't work.
 AC_INIT([Hello], [1.0], [bug-hello@example.org], [],
-        [http://www.example.org/])
+        [https://www.example.org/])
 AC_DEFINE([HELLO_WORLD], ["Hello, World\n"],
   [Greetings string.])
 AC_LANG_CONFTEST(
@@ -244,7 +244,7 @@ AT_CHECK([sed -n 's/ *$//; /#define PACKAGE/,$p' stdout], [],
 #define PACKAGE_VERSION "1.0"
 #define PACKAGE_STRING "Hello 1.0"
 #define PACKAGE_BUGREPORT "bug-hello@example.org"
-#define PACKAGE_URL "http://www.example.org/"
+#define PACKAGE_URL "https://www.example.org/"
 #define HELLO_WORLD "Hello, World\n"
 
 const char hw[] = "Hello, World\n";
diff --git a/tests/m4sh.at b/tests/m4sh.at
index 1baaf44b..e9d70b02 100644
--- a/tests/m4sh.at
+++ b/tests/m4sh.at
@@ -764,7 +764,7 @@ AT_CLEANUP
 ## Negated classes in globbing.  ##
 ## ----------------------------- ##
 
-# According to http://www.in-ulm.de/~mascheck/bourne/, all shells with
+# According to https://www.in-ulm.de/~mascheck/bourne/, all shells with
 # functions also support `[!...]'.  But `[^...]' is not universally supported.
 
 AT_SETUP([Negated classes in globbing])
@@ -792,7 +792,7 @@ AT_CLEANUP
 ## Null variable substitution.  ##
 ## ---------------------------- ##
 
-# According to http://www.in-ulm.de/~mascheck/bourne/, all shells with
+# According to https://www.in-ulm.de/~mascheck/bourne/, all shells with
 # functions also support `${a:-b}'.
 
 AT_SETUP([Null variable substitution])
diff --git a/tests/tools.at b/tests/tools.at
index a4a7dd77..e9a62408 100644
--- a/tests/tools.at
+++ b/tests/tools.at
@@ -1386,7 +1386,7 @@ do
   funny=`func_sanitize_file_name "$funny"`
   file=" file $funny"
   dir=`func_sanitize_dir_name " dir $funny"`
-  TMPDIR=" tmp$dir"
+  TMPDIR="./ tmp$dir"
   export TMPDIR
 
   # skip if we cannot create such a file or directory
