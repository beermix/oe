diff --git a/configure.py b/configure.py
index 9e23a5a..74459a6 100755
--- a/configure.py
+++ b/configure.py
@@ -340,14 +340,14 @@ else:
         cflags += ['-D_GLIBCXX_DEBUG', '-D_GLIBCXX_DEBUG_PEDANTIC']
         cflags.remove('-fno-rtti')  # Needed for above pedanticness.
     else:
-        cflags += ['-O2', '-DNDEBUG']
+        cflags += ['-O3', '-DNDEBUG']
     try:
         proc = subprocess.Popen(
             [CXX, '-fdiagnostics-color', '-c', '-x', 'c++', '/dev/null',
              '-o', '/dev/null'],
             stdout=open(os.devnull, 'wb'), stderr=subprocess.STDOUT)
         if proc.wait() == 0:
-            cflags += ['-fdiagnostics-color']
+            cflags += ['-fdiagnostics-color=always']
     except:
         pass
     if platform.is_mingw():
